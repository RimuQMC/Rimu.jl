<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Stochastic styles · Rimu.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Rimu.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Rimu.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Guide</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="generated/BHM-example.html">1D Bose-Hubbard Model</a></li><li><a class="tocitem" href="generated/BHM-example-mpi.html">Using MPI</a></li></ul></li><li><span class="tocitem">User documentation</span><ul><li><a class="tocitem" href="statstools.html">StatsTools</a></li></ul></li><li><span class="tocitem">Developer documentation</span><ul><li><a class="tocitem" href="interfaces.html">Interfaces</a></li><li><a class="tocitem" href="hamiltonians.html">Hamiltonians</a></li><li><a class="tocitem" href="dictvectors.html">Dict vectors</a></li><li><a class="tocitem" href="addresses.html">BitString addresses</a></li><li class="is-active"><a class="tocitem" href="stochasticstyles.html">Stochastic styles</a><ul class="internal"><li><a class="tocitem" href="#Available-StochasticStyles"><span>Available <code>StochasticStyle</code>s</span></a></li><li><a class="tocitem" href="#The-StochasticStyle-interface"><span>The <code>StochasticStyle</code> interface</span></a></li><li><a class="tocitem" href="#Spawning-strategies-and-convenience-functions"><span>Spawning strategies and convenience functions</span></a></li></ul></li><li><a class="tocitem" href="RMPI.html">RMPI</a></li><li><a class="tocitem" href="consistentrng.html">Random Numbers</a></li><li><a class="tocitem" href="documentation.html">Documentation generation</a></li><li><a class="tocitem" href="testing.html">Code testing</a></li></ul></li><li><a class="tocitem" href="API.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer documentation</a></li><li class="is-active"><a href="stochasticstyles.html">Stochastic styles</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="stochasticstyles.html">Stochastic styles</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/joachimbrand/Rimu.jl/blob/master/docs/src/stochasticstyles.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Module-StochasticStyles"><a class="docs-heading-anchor" href="#Module-StochasticStyles">Module <code>StochasticStyles</code></a><a id="Module-StochasticStyles-1"></a><a class="docs-heading-anchor-permalink" href="#Module-StochasticStyles" title="Permalink"></a></h1><p>This module contains the implementations of <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>s, which control how the stochastic matrix-vector multiplication is performed.</p><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.StochasticStyle" href="#Rimu.Interfaces.StochasticStyle"><code>Rimu.Interfaces.StochasticStyle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StochasticStyle(v)</code></pre><p>Abstract type. When called as a function it returns the native style of the generalised vector <code>v</code> that determines how simulations are to proceed.</p><p><strong>Implemented styles</strong></p><ul><li><a href="@ref"><code>IsStochasticInteger</code></a> - integer walker FCIQMC</li><li><a href="@ref"><code>IsDeterministic</code></a> - perform deterministic variant of power method</li><li><a href="@ref"><code>IsStochasticWithThreshold</code></a> - floating point walker FCIQMC</li><li><a href="@ref"><code>IsDynamicSemistochastic</code></a> - floating point walker FCIQMC with smarter spawning and vector compression</li><li><a href="@ref"><code>IsStochastic2Pop</code></a></li><li><a href="@ref"><code>IsExplosive</code></a></li></ul><p><strong>Usage</strong></p><p>Concrete <code>StochasticStyle</code>s can be used for the <code>style</code> keyword argument of <a href="@ref"><code>lomc!</code></a> and <a href="@ref"><code>DVec</code></a>.</p><p><strong>Interface</strong></p><p>When defining a new <code>StochasticStyle</code>, subtype it as <code>MyStyle&lt;:StochasticStyle{T}</code> where <code>T</code> is the concrete value type the style is designed to work with.</p><p>For it to work with <a href="@ref"><code>lomc!</code></a>, a <code>StochasticStyle</code> must define the following:</p><ul><li><a href="stochasticstyles.html#Rimu.Interfaces.fciqmc_col!"><code>fciqmc_col!(::StochasticStyle, w, H, address, value, shift, dτ)</code></a></li><li><a href="stochasticstyles.html#Rimu.Interfaces.step_stats"><code>step_stats(::StochasticStyle)</code></a></li></ul><p>Optionally, it can also define <a href="stochasticstyles.html#Rimu.Interfaces.update_dvec!"><code>update_dvec!</code></a>, which can be used to perform arbitrary transformations on the generalised vector after the spawning step is complete.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L1-L34">source</a></section></article><h2 id="Available-StochasticStyles"><a class="docs-heading-anchor" href="#Available-StochasticStyles">Available <code>StochasticStyle</code>s</a><a id="Available-StochasticStyles-1"></a><a class="docs-heading-anchor-permalink" href="#Available-StochasticStyles" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.StyleUnknown" href="#Rimu.Interfaces.StyleUnknown"><code>Rimu.Interfaces.StyleUnknown</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StyleUnknown{T}() &lt;: StochasticStyle</code></pre><p>Trait for value types not (currently) compatible with FCIQMC. This style makes it possible to construct dict vectors with unsupported <code>valtype</code>s.</p><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L41-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsStochasticInteger" href="#Rimu.StochasticStyles.IsStochasticInteger"><code>Rimu.StochasticStyles.IsStochasticInteger</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsStochasticInteger{T=Int}() &lt;: StochasticStyle{T}</code></pre><p>Trait for generalised vector of configurations indicating stochastic propagation as seen in the original FCIQMC algorithm.</p><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsDeterministic" href="#Rimu.StochasticStyles.IsDeterministic"><code>Rimu.StochasticStyles.IsDeterministic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsDeterministic{T=Float64}() &lt;: StochasticStyle{T}</code></pre><p>Trait for generalised vector of configuration indicating deterministic propagation of walkers. The optional <a href="@ref"><code>compression</code></a> argument can set a <a href="stochasticstyles.html#Rimu.Interfaces.CompressionStrategy"><code>CompressionStrategy</code></a>.</p><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L65-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsStochasticWithThreshold" href="#Rimu.StochasticStyles.IsStochasticWithThreshold"><code>Rimu.StochasticStyles.IsStochasticWithThreshold</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsStochasticWithThreshold{T=Float64}(threshold=1.0) &lt;: StochasticStyle{T}</code></pre><p>Trait for generalised vector of configurations indicating stochastic propagation with real walker numbers and cutoff <code>threshold</code>.</p><p>During stochastic propagation, walker numbers small than <code>threshold</code> will be stochastically projected to either zero or <code>threshold</code>.</p><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L107-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsDynamicSemistochastic" href="#Rimu.StochasticStyles.IsDynamicSemistochastic"><code>Rimu.StochasticStyles.IsDynamicSemistochastic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsDynamicSemistochastic{T=Float64}(; kwargs...) &lt;: StochasticStyle{T}</code></pre><p>QMC propagation with non-integer walker numbers and reduced noise. All possible spawns are performed deterministically when number of walkers in a configuration is high. Unlike with <a href="stochasticstyles.html#Rimu.StochasticStyles.IsStochasticInteger"><code>IsStochasticInteger</code></a> or <a href="stochasticstyles.html#Rimu.StochasticStyles.IsStochasticWithThreshold"><code>IsStochasticWithThreshold</code></a>, where spawns are projected on the fly, stochastic vector compression is applied after spawning and diagonal death steps.</p><p>Note: if you want <code>IsDynamicSemistochastic</code> to project spawns as they are being performed, set a threshold to <code>spawning</code>, and set <code>compression</code> to <a href="@ref"><code>NoCompression</code></a>.</p><p><strong>Parameters:</strong></p><ul><li><p><code>rel_threshold = 1.0</code>: If the walker number on a configuration times this threshold is greater than the number of offdiagonals, spawning is done deterministically. Should be set to 1 or more for best performance.</p></li><li><p><code>abs_threshold = Inf</code>: If the walker number on a configuration is greater than this value, spawning is done deterministically. Can be set to e.g. <code>abs_threshold = 0.1 * target_walkers</code>.</p></li><li><p><code>proj_threshold = 1.0</code>: Values below this number are stochastically projected to this value or zero. See also <a href="stochasticstyles.html#Rimu.StochasticStyles.IsStochasticWithThreshold"><code>IsStochasticWithThreshold</code></a>.</p></li><li><p><code>spawning = WithReplacement()</code>: <a href="stochasticstyles.html#Rimu.StochasticStyles.SpawningStrategy"><code>SpawningStrategy</code></a> to use for the non-exact spawns.</p></li><li><p><code>compression = ThresholdCompression(proj_threshold)</code>: <a href="@ref"><code>CompressionStartegy</code></a> used to compress the vector after a step. Overrides <code>proj_threshold</code>.</p></li></ul><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L137-L167">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsStochastic2Pop" href="#Rimu.StochasticStyles.IsStochastic2Pop"><code>Rimu.StochasticStyles.IsStochastic2Pop</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsStochastic2Pop{T=Complex{Int}}() &lt;: StochasticStyle{T}</code></pre><p>Trait for generalised vector of configurations indicating stochastic propagation with complex walker numbers representing two populations of integer walkers.</p><p>When using this style, make sure to set a complex target number walkers in the <a href="@ref"><code>ShiftStrategy</code></a>!</p><p>This style is experimental and unexported.</p><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L27-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.IsExplosive" href="#Rimu.StochasticStyles.IsExplosive"><code>Rimu.StochasticStyles.IsExplosive</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsExplosive{T=Float64}(; splatter_factor, explosion_threshold, compression) &lt;: StochasticStyle{T}</code></pre><p>QMC propagation with explosive walkers. Walkers with small walker numbers do not perform the standard death/spawning steps. Instead, a walker will either die completely and spawn with a greater magnitude (refered to as explosion below), or stay unchanged and not spawn. The probabilty of exploding is controlled by the shift and <code>dτ</code>.</p><p>Walkers with high walker numbers spawn as if <a href="stochasticstyles.html#Rimu.StochasticStyles.IsDynamicSemistochastic"><code>IsDynamicSemistochastic</code></a> was used.</p><p>Like <a href="stochasticstyles.html#Rimu.StochasticStyles.IsDynamicSemistochastic"><code>IsDynamicSemistochastic</code></a>, the vector is compressed after all spawning is performed.</p><p>This style is experimental and unexported.</p><p><strong>Parameters</strong></p><ul><li><p><code>splatter_factor = 1.0</code>: The spawning strength to use with exploded walkers.</p></li><li><p><code>explosion_threshold = 1.0</code>: Entries smaller or equal than this value will attempt to explode.</p></li><li><p><code>proj_threshold = 1.0</code>: Threshold to use in vector compression.</p></li><li><p><code>compression = ThresholdCompression(proj_threshold)</code>: <a href="stochasticstyles.html#Rimu.Interfaces.CompressionStrategy"><code>CompressionStrategy</code></a> to use to compress the vector. Overrides <code>proj_threshold</code>.</p></li></ul><p>See also <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/styles.jl#L204-L232">source</a></section></article><h2 id="The-StochasticStyle-interface"><a class="docs-heading-anchor" href="#The-StochasticStyle-interface">The <code>StochasticStyle</code> interface</a><a id="The-StochasticStyle-interface-1"></a><a class="docs-heading-anchor-permalink" href="#The-StochasticStyle-interface" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.step_stats" href="#Rimu.Interfaces.step_stats"><code>Rimu.Interfaces.step_stats</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">step_stats(::StochasticStyle)</code></pre><p>Return a tuple of names (<code>Symbol</code> or <code>String</code>) and a tuple of zeros of values of the same length. These will be reported as columns in the <code>DataFrame</code> returned by <a href="@ref"><code>lomc!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L107-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.fciqmc_col!" href="#Rimu.Interfaces.fciqmc_col!"><code>Rimu.Interfaces.fciqmc_col!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fciqmc_col!(w, ham, add, num, shift, dτ)
fciqmc_col!(::StochasticStyle, args...)</code></pre><p>Spawning and diagonal step of FCIQMC for single column of <code>ham</code>. In essence it computes</p><p><code>w .+= (1 .+ dτ.*(shift .- ham[:,add])).*num</code>.</p><p>The <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle(w)</code></a>, picks the algorithm used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L123-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.update_dvec!" href="#Rimu.Interfaces.update_dvec!"><code>Rimu.Interfaces.update_dvec!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_dvec!([::StochasticStyle,] dvec) -&gt; dvec, nt</code></pre><p>Perform an arbitrary transformation on <code>dvec</code> after the spawning step is completed and report statistics to the <code>DataFrame</code>.</p><p>Returns the new <code>dvec</code> and a <code>NamedTuple</code> <code>nt</code> of statistics to be reported.</p><p>When extending this function for a custom <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>, define a method for the two-argument call signature!</p><p>The default implementation uses <a href="stochasticstyles.html#Rimu.Interfaces.CompressionStrategy"><code>CompressionStrategy</code></a> to compress the vector.</p><p>Note: <code>update_dvec!</code> may return a new vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L84-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.CompressionStrategy" href="#Rimu.Interfaces.CompressionStrategy"><code>Rimu.Interfaces.CompressionStrategy</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CompressionStrategy</code></pre><p>The <code>CompressionStrategy</code> controls how a vector is compressed after a step. To use, define <code>CompressionStrategy(::StochasticStyle)</code>. The default implementation returns <a href="@ref"><code>NoCompression</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L59-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.compress!" href="#Rimu.Interfaces.compress!"><code>Rimu.Interfaces.compress!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compress!(::CompressionStrategy, v)</code></pre><p>Compress the vector <code>v</code> and return it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L77-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.Interfaces.default_style" href="#Rimu.Interfaces.default_style"><code>Rimu.Interfaces.default_style</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">default_style(::Type)</code></pre><p>Pick a <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a> based on the value type. Throws an error if no known default style is known.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/Interfaces/stochasticstyles.jl#L51-L56">source</a></section></article><h2 id="Spawning-strategies-and-convenience-functions"><a class="docs-heading-anchor" href="#Spawning-strategies-and-convenience-functions">Spawning strategies and convenience functions</a><a id="Spawning-strategies-and-convenience-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Spawning-strategies-and-convenience-functions" title="Permalink"></a></h2><p>The following functions and types are unexported, but are useful when defining new styles.</p><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.diagonal_step!" href="#Rimu.StochasticStyles.diagonal_step!"><code>Rimu.StochasticStyles.diagonal_step!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">diagonal_step!(w, ham, add, val, dτ, shift, threshold=0, report_stats=false)</code></pre><p>Perform diagonal step on a walker <code>add =&gt; val</code>. Optional argument <code>threshold</code> sets the projection threshold. If <code>eltype(w)</code> is an <code>Integer</code>, the <code>val</code> is rounded to the nearest integer stochastically.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L91-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.projected_deposit!" href="#Rimu.StochasticStyles.projected_deposit!"><code>Rimu.StochasticStyles.projected_deposit!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">projected_deposit!(w, add, val, parent, threshold=0)</code></pre><p>Like <a href="dictvectors.html#Rimu.Interfaces.deposit!"><code>deposit!</code></a>, but performs threshold projection before spawning. If <code>eltype(w)</code> is an <code>Integer</code>, values are stochastically rounded.</p><p>Returns the value deposited and the number of annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.SpawningStrategy" href="#Rimu.StochasticStyles.SpawningStrategy"><code>Rimu.StochasticStyles.SpawningStrategy</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SpawningStrategy</code></pre><p>A <code>SpawningStrategy</code> is used to control how (offdiagonal) spawns are peformed. It is used by passing it as the first argument to <a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a>.</p><p>The following methods are implemented:</p><ul><li><a href="stochasticstyles.html#Rimu.StochasticStyles.Exact"><code>Exact</code></a></li><li><a href="stochasticstyles.html#Rimu.StochasticStyles.SingleSpawn"><code>SingleSpawn</code></a></li><li><a href="stochasticstyles.html#Rimu.StochasticStyles.WithReplacement"><code>WithReplacement</code></a></li><li><a href="stochasticstyles.html#Rimu.StochasticStyles.WithoutReplacement"><code>WithoutReplacement</code></a></li><li><a href="stochasticstyles.html#Rimu.StochasticStyles.Bernoulli"><code>Bernoulli</code></a></li><li><a href="stochasticstyles.html#Rimu.StochasticStyles.DynamicSemistochastic"><code>DynamicSemistochastic</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L148-L162">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.Exact" href="#Rimu.StochasticStyles.Exact"><code>Rimu.StochasticStyles.Exact</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Exact(threshold=0.0) &lt;: SpawningStrategy</code></pre><p>Perform an exact spawning step.</p><p><strong>Parameters</strong></p><ul><li><code>threshold</code> sets the projection threshold. If set to zero, no projection is performed.</li></ul><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L178-L188">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.SingleSpawn" href="#Rimu.StochasticStyles.SingleSpawn"><code>Rimu.StochasticStyles.SingleSpawn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SingleSpawn(threshold=0.0) &lt;: SpawningStrategy</code></pre><p>Perform a single spawn. Useful as a building block for other stochastic styles.</p><p><strong>Parameters</strong></p><ul><li><code>threshold</code> sets the projection threshold. If set to zero, no projection is performed.</li></ul><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L208-L219">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.WithReplacement" href="#Rimu.StochasticStyles.WithReplacement"><code>Rimu.StochasticStyles.WithReplacement</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">WithReplacement(threshold=0.0, strength=1.0) &lt;: SpawningStrategy</code></pre><p><a href="stochasticstyles.html#Rimu.StochasticStyles.SpawningStrategy"><code>SpawningStrategy</code></a> where spawn targets are sampled with replacement. This is the default spawning strategy for most of the <a href="stochasticstyles.html#Rimu.Interfaces.StochasticStyle"><code>StochasticStyle</code></a>s.</p><p><strong>Parameters</strong></p><ul><li><code>threshold</code> sets the projection threshold. If set to zero, no projection is performed.</li><li><code>strength</code> sets the number of spawns to perform, e.g. if <code>val=5</code> and <code>strength=2</code>, 10 spawns will be performed.</li></ul><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L238-L250">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.WithoutReplacement" href="#Rimu.StochasticStyles.WithoutReplacement"><code>Rimu.StochasticStyles.WithoutReplacement</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">WithoutReplacement(threshold=0.0, strength=1.0) &lt;: SpawningStrategy</code></pre><p><a href="stochasticstyles.html#Rimu.StochasticStyles.SpawningStrategy"><code>SpawningStrategy</code></a> where spawn targets are sampled without replacement.</p><p>Only to be used with <a href="stochasticstyles.html#Rimu.StochasticStyles.DynamicSemistochastic"><code>DynamicSemistochastic</code></a>.</p><p><strong>Parameters</strong></p><ul><li><code>threshold</code> sets the projection threshold. If set to zero, no projection is performed.</li><li><code>strength</code> sets the number of spawns to perform, e.g. if <code>val=5</code> and <code>strength=2</code>, 10 spawns will be performed.</li></ul><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L276-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.Bernoulli" href="#Rimu.StochasticStyles.Bernoulli"><code>Rimu.StochasticStyles.Bernoulli</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Bernoulli(threshold=0.0, strength=1.0) &lt;: SpawningStrategy</code></pre><p>Perform Bernoulli sampling. A spawn is attempted on each offdiagonal element with a probability that results in an expected number of spawns equal to the number of walkers on the spawning configuration.</p><p>Only to be used with <a href="stochasticstyles.html#Rimu.StochasticStyles.DynamicSemistochastic"><code>DynamicSemistochastic</code></a>.</p><p><strong>Parameters</strong></p><ul><li><code>threshold</code> sets the projection threshold.</li><li><code>strength</code> sets the number of spawns to perform, e.g. if <code>val=5</code> and <code>strength=2</code>, 10 spawns will be performed on average.</li></ul><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L323-L339">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.DynamicSemistochastic" href="#Rimu.StochasticStyles.DynamicSemistochastic"><code>Rimu.StochasticStyles.DynamicSemistochastic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DynamicSemistochastic(; start, rel_threshold, abs_threshold) &lt;: SpawningStrategy</code></pre><p><a href="stochasticstyles.html#Rimu.StochasticStyles.SpawningStrategy"><code>SpawningStrategy</code></a> that behaves like <code>strat</code> when the number of walkers is low, but performs exact steps when it is high. What &quot;high&quot; means is controlled by the two thresholds described below.</p><p><strong>Parameters</strong></p><ul><li><p><code>strat = WithReplacement()</code>: a <a href="stochasticstyles.html#Rimu.StochasticStyles.SpawningStrategy"><code>SpawningStrategy</code></a> to use when the multiplication is not performed exactly. If the <code>strat</code> has a <code>threshold</code> different from zero, all spawns will be projected to that threshold.</p></li><li><p><code>rel_threshold = 1.0</code>: When deciding on whether to perform an exact spawn, this value is multiplied to the number of walkers. Should be set to 1 or more for best performance. This threshold is affected by <code>strat.strength</code>.</p></li><li><p><code>abs_threshold = Inf</code>: When deciding on whether to perform an exact spawn, <code>min(abs_threshold, num_offdiagonals)</code> is used. This threshold is affected by <code>strat.strength</code>.</p></li></ul><p>See e.g. <a href="stochasticstyles.html#Rimu.StochasticStyles.WithoutReplacement"><code>WithoutReplacement</code></a> for a description of the <code>strat.threshold</code> and <code>strat.strength</code> parameters.</p><p><a href="stochasticstyles.html#Rimu.StochasticStyles.spawn!"><code>spawn!</code></a> with this strategy returns the numbers of exact and inexact spawns, and the number of spawns and annihilations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L370-L396">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.StochasticStyles.spawn!" href="#Rimu.StochasticStyles.spawn!"><code>Rimu.StochasticStyles.spawn!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spawn!(s::SpawningStrategy, w, ham::AbstractHamiltonian, add, val, dτ)
spawn!(s::SpawningStrategy, w, offdiags::AbstractOffdiagonals, add, val, dτ)</code></pre><p>Perform stochastic spawns to <code>w</code> from address <code>add</code> with <code>val</code> walkers. <code>dτ</code> is a factor multiplied to every spawns, while <code>val</code> also controls the number of spawns performed.</p><p>This function should be overloaded in the second form, with <code>offdiags</code> as an argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/f1a31a76c364398c28dd68137edf182e81fc3f92/src/StochasticStyles/spawning.jl#L165-L173">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="addresses.html">« BitString addresses</a><a class="docs-footer-nextpage" href="RMPI.html">RMPI »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Thursday 2 September 2021 03:43">Thursday 2 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
