<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Random Numbers · Rimu.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Rimu.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Rimu.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Guide</a></li><li><a class="tocitem" href="BHM-example.html">Example: 1D Bose-Hubbard Model</a></li><li><span class="tocitem">User documentation</span><ul><li><a class="tocitem" href="statstools.html">StatsTools</a></li></ul></li><li><span class="tocitem">Developer documentation</span><ul><li><a class="tocitem" href="hamiltonians.html">Hamiltonians</a></li><li class="is-active"><a class="tocitem" href="consistentrng.html">Random Numbers</a><ul class="internal"><li><a class="tocitem" href="#Random-Numbers"><span>Random Numbers</span></a></li></ul></li><li><a class="tocitem" href="documentation.html">Documentation generation</a></li><li><a class="tocitem" href="testing.html">Code testing</a></li></ul></li><li><a class="tocitem" href="API.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer documentation</a></li><li class="is-active"><a href="consistentrng.html">Random Numbers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="consistentrng.html">Random Numbers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/joachimbrand/Rimu.jl/blob/master/docs/src/consistentrng.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Random-Numbers"><a class="docs-heading-anchor" href="#Random-Numbers">Random Numbers</a><a id="Random-Numbers-1"></a><a class="docs-heading-anchor-permalink" href="#Random-Numbers" title="Permalink"></a></h2><p>Generating good quality random numbers is crucial for any Monte Carlo code. In addition to generating pseudo random numbers with good statistics and in minimal CPU time, we also have the requirement that computations should be reproducible and the random number sequences independent on each worker when the code runs in parallel mode.</p><p>We define the random number generator in the module <code>ConsistentRNG.jl</code>, which is loaded onto each process. Furthermore, independent seeds are used to seed the RNGs on each worker (from <code>goQMC.jl</code>). These seeds are generated using the <code>Random.RandomDevice</code> random number generator, which draws entropy from the operating system / hardware. The seeds are saved to file with a filename that includes the number of processes used. If a suitable file is found, then seeds are read in from the file. This behaviour can be controlled by the flag <code>reuseRandomSeeds</code> in the input file.</p><p>For the random number generator we are currently using &#39;Xoroshiro128Plus&#39; from &#39;RandomNumbers.jl&#39;. For benchmarks and statistical test results see the <a href="https://sunoru.github.io/RandomNumbers.jl/stable/man/benchmark/#Benchmark-1">Documentation of <code>RandomNumbers.jl</code></a>.</p><h3 id="Module-ConsistentRNG.jl"><a class="docs-heading-anchor" href="#Module-ConsistentRNG.jl">Module <code>ConsistentRNG.jl</code></a><a id="Module-ConsistentRNG.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Module-ConsistentRNG.jl" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG" href="#Rimu.ConsistentRNG"><code>Rimu.ConsistentRNG</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia">module ConsistentRNG</code></pre><p>Provides a an array random number generators with one for each thread.</p><p>Exports <a href="consistentrng.html#Rimu.ConsistentRNG.cRand-Tuple"><code>cRand()</code></a> and <a href="consistentrng.html#Rimu.ConsistentRNG.seedCRNG!-Tuple{Vector{T} where T}"><code>seedCRNG!()</code></a>. These are thread consistent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.CRNGs" href="#Rimu.ConsistentRNG.CRNGs"><code>Rimu.ConsistentRNG.CRNGs</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">CRNGs[]</code></pre><p>Defines an array of random number generators suitable for threaded code. For MPI or distributed runs it should be seeded separately on each process with <a href="consistentrng.html#Rimu.ConsistentRNG.seedCRNG!-Tuple{Vector{T} where T}"><code>seedCRNG!</code></a>. Currently we are using &#39;Xoshiro256StarStar&#39; from &#39;RandomNumbers.jl&#39;, see the <a href="https://sunoru.github.io/RandomNumbers.jl/stable/man/benchmark/#Benchmark-1">Documentation</a> and this <a href="https://nullprogram.com/blog/2017/09/21/">Blog post</a>. In order to change the random number generator, edit &#39;ConsistentRNG.jl&#39;.</p><pre><code class="language-julia">rng = CRNGs[][Threads.threadid()]
rand(rng)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L26-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.CRNG" href="#Rimu.ConsistentRNG.CRNG"><code>Rimu.ConsistentRNG.CRNG</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Baseline random number generator used throughout. Currently we are using &#39;Xoshiro256StarStar&#39; from &#39;RandomNumbers.jl&#39;, see the <a href="https://sunoru.github.io/RandomNumbers.jl/stable/man/benchmark/#Benchmark-1">Documentation</a> and this <a href="https://nullprogram.com/blog/2017/09/21/">Blog post</a>. In order to change the random number generator, edit &#39;ConsistentRNG.jl&#39;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L17-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.cRand-Tuple" href="#Rimu.ConsistentRNG.cRand-Tuple"><code>Rimu.ConsistentRNG.cRand</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">r = cRand(args...)</code></pre><p>Similar to &#39;rand(args)&#39; but uses consistent random number generator &#39;CRNGs[]&#39;. &#39;cRand()&#39; generates a single uniformly distributed random number in the interval [0,1). Currently we are using &#39;Xoshiro256StarStar&#39; from &#39;RandomNumbers.jl&#39;, see the <a href="https://sunoru.github.io/RandomNumbers.jl/stable/man/benchmark/#Benchmark-1">Documentation</a> and this <a href="https://nullprogram.com/blog/2017/09/21/">Blog post</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L56-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.cRandn-Tuple" href="#Rimu.ConsistentRNG.cRandn-Tuple"><code>Rimu.ConsistentRNG.cRandn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">r = cRandn(args...)</code></pre><p>Similar to &#39;randn(args)&#39; but uses consistent random number generators &#39;CRNGs[]&#39;. &#39;cRandn()&#39; generates a single normally distributed random number. Currently we are using &#39;Xoshiro256StarStar&#39; from &#39;RandomNumbers.jl&#39;, see the <a href="https://sunoru.github.io/RandomNumbers.jl/stable/man/benchmark/#Benchmark-1">Documentation</a> and this <a href="https://nullprogram.com/blog/2017/09/21/">Blog post</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L68-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.check_crng_independence-Tuple{Any}" href="#Rimu.ConsistentRNG.check_crng_independence-Tuple{Any}"><code>Rimu.ConsistentRNG.check_crng_independence</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ConsistentRNG.check_crng_independence(v)</code></pre><p>Primitve test to check the random number generators. It throws an error if some of the threaded random number generators are equal. Returns the number of threaded RNGs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L108-L113">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.newChildRNG" href="#Rimu.ConsistentRNG.newChildRNG"><code>Rimu.ConsistentRNG.newChildRNG</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">newChildRNG(parent_rng = trng())</code></pre><p>Random number generator that is seeded deterministically from the thread-consistent global rng <a href="consistentrng.html#Rimu.ConsistentRNG.trng-Tuple{}"><code>trng()</code></a>. By scrambling with <code>hash()</code>, a statistically independent pseudo-random sequence from the parent rng is accessed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L121-L127">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.seedCRNG!-Tuple{Vector{T} where T}" href="#Rimu.ConsistentRNG.seedCRNG!-Tuple{Vector{T} where T}"><code>Rimu.ConsistentRNG.seedCRNG!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">seedCRNG!([seed])</code></pre><p>Seed the threaded consistent random number generators <code>CRNGs[]</code>. If a single number is given, this will be used to seed a random sequence, which is hashed and then used to generate seeds for each rng in the vector <a href="consistentrng.html#Rimu.ConsistentRNG.CRNGs"><code>CRNGs</code></a>. When no argument is given, each rng is seeded randomly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L78-L85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.sync_cRandn-Tuple{Any}" href="#Rimu.ConsistentRNG.sync_cRandn-Tuple{Any}"><code>Rimu.ConsistentRNG.sync_cRandn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">sync_cRandn(v)</code></pre><p>Generate one random number with <a href="consistentrng.html#Rimu.ConsistentRNG.cRandn-Tuple"><code>cRandn()</code></a> in a synchronous way. Defaults to <a href="consistentrng.html#Rimu.ConsistentRNG.cRandn-Tuple"><code>cRandn()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L132-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rimu.ConsistentRNG.trng-Tuple{}" href="#Rimu.ConsistentRNG.trng-Tuple{}"><code>Rimu.ConsistentRNG.trng</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">trng()</code></pre><p>Thread local random number generator.</p><pre><code class="language-julia">rand(trng())
rand(trng(),UInt)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/joachimbrand/Rimu.jl/blob/00e49732e9d6e78d9f500817025975ffec1f5cfb/src/ConsistentRNG.jl#L45-L53">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="hamiltonians.html">« Hamiltonians</a><a class="docs-footer-nextpage" href="documentation.html">Documentation generation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 14 June 2021 09:39">Monday 14 June 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
